{% extends "layout.html" %}
{% block content %}
    Logged in as: <b>{{ user["username"] }}</b>
    <a href="{{ url_for('logout_view') }}">Logout</a>
    <h1>Task List ({{ tasks|length }})</h1>
    <form action="{{ url_for('index') }}" method=post>
        Task: <input type=text name=task_name><input type=submit value=Add>
    </form>
    {% for task in tasks %}
        <p>
            <form id="form_check_{{ task["id"] }}" action="{{ url_for('complete') }}" method=post>
                <input
                    type="checkbox"
                    name="task"
                    id="task_{{ task["id"] }}"
                    value="{{ task["id"] }}"
                    {% if task["done"] %}
                        checked
                    {% endif %}
                    onclick = "checkBoxes({{ task["id"] }});"
                >
                <label for="task_{{ task["id"] }}">
                    {% if task["done"] %}
                        <del>{{ task["name"] }}</del>
                    {% else %}
                        {{ task["name"] }}
                    {% endif %}
                </label>
            </form>
        </p>
    {% endfor %}
    <script>
        function checkBoxes(id){
            //var check = document.getElementById("id_task_"+id);
            //alert(check.checked);
            document.getElementById("form_check_"+id).submit();
        }
    </script>
{% endblock %}
